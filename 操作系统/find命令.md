find 显示的错误会有许多行，因为普通用户对 /etc 下的某些文件夹没有读取访问权限。它使读取正确的输出变得很麻烦，如果 find 是更大的脚本的一部分，它可能会导致行中的下一个命令排队。

相反，你可以这样做：

```shell
find /etc -iname "*.service" 2> /dev/null
```

而且你只得到你想要的结果。

文件描述符入门

单独的文件描述符 stdout 和 stderr 还有一些注意事项。如果要将输出存储在文件中，请执行以下操作：

```shell
find /etc -iname "*.service" 1> services.txt
```

工作正常，因为 1> 意味着 “发送标准输出且自身标准输出(非标准错误)到某个地方”。

但这里存在一个问题：如果你想把命令抛出的错误信息记录到文件，而结果中没有错误信息你该怎么做？上面的命令并不会这样做，因为它只写入 find 正确的结果，而：

```shell
find /etc -iname "*.service" 2> services.txt
```

只会写入命令抛出的错误信息。

我们如何得到两者？请尝试以下命令：

```shell
find /etc -iname "*.service" &> services.txt
```

…… 再次和 & 打个招呼！

我们一直在说 stdin(0)、stdout(1)和 stderr(2)是“文件描述符”。文件描述符是一种特殊构造，是指向文件的通道，用于读取或写入，或两者兼而有之。这来自于将所有内容都视为文件的旧 UNIX 理念。想写一个设备？将其视为文件。想写入套接字并通过网络发送数据？将其视为文件。想要读取和写入文件？嗯，显然，将其视为文件。

因此，在管理命令的输出和错误的位置时，将目标视为文件。因此，当你打开它们来读取和写入它们时，它们都会获得文件描述符。

这是一个有趣的效果。例如，你可以将内容从一个文件描述符传递到另一个文件描述符：

```shell
find /etc -iname "*.service" 1> services.txt 2>&1


```

这会将 stderr 导向到 stdout，而 stdout 通过管道被导向到一个文件中 services.txt 中。

它再次出现：& 发信号通知 Bash 1 是目标文件描述符。

标准文件描述符的另一个问题是，当你从一个管道传输到另一个时，你执行此操作的顺序有点违反直觉。例如，按照上面的命令。它看起来像是错误的方式。你应该像这样阅读它：“将输出导向到文件，然后将错误导向到标准输出。” 看起来错误输出会在后面，并且在输出到标准输出(1)已经完成时才发送。

但这不是文件描述符的工作方式。文件描述符不是文件的占位符，而是文件的输入和(或)输出通道。在这种情况下，当你做 1> services.txt 时，你的意思是 “打开一个写管道到 services.txt 并保持打开状态”。1 是你要使用的管道的名称，它将保持打开状态直到该行的结尾。

如果你仍然认为这是错误的方法，试试这个：

```shell
find /etc -iname "*.service" 2>&1 1>services.txt
```

并注意它是如何不工作的；注意错误是如何被导向到终端的，而只有非错误的输出(即 stdout)被推送到 services.txt。

这是因为 Bash 从左到右处理 find 的每个结果。这样想：当 Bash 到达 2>&1 时，stdout (1)仍然是指向终端的通道。如果 find 给 Bash 的结果包含一个错误，它将被弹出到 2，转移到 1，然后留在终端！

然后在命令结束时，Bash 看到你要打开 stdout(1) 作为到 services.txt 文件的通道。如果没有发生错误，结果将通过通道 1 进入文件。

相比之下，在：

```shell
find /etc -iname "*.service" 1>services.txt 2>&1
```

1 从一开始就指向 services.txt，因此任何弹出到 2 的内容都会导向到 1 ，而 1 已经指向最终去的位置 services.txt，这就是它工作的原因。

在任何情况下，如上所述 &> 都是“标准输出和标准错误”的缩写，即 2>&1。

这可能有点多，但不用担心。重新导向文件描述符在 Bash 命令行和脚本中是司空见惯的事。随着本系列的深入，你将了解更多关于文件描述符的知识。下周见! 

这是`find`命令在Linux系统中的一些常用参数，它用于在文件系统中搜索文件和目录。以下是这些参数的简要说明：

1. **`-amin n`：** 查找在n分钟内访问过的文件。

2. **`-anewer file`：** 查找比file更晚访问的文件。

3. **`-atime n`：** 查找在n天内访问过的文件。

4. **`-cmin n`：** 查找在n分钟内状态或属性被修改过的文件。

5. **`-cnewer file`：** 查找比file更晚状态或属性修改的文件。

6. **`-ctime n`：** 查找在n天内状态或属性被修改过的文件。

7. **`-delete`：** 删除匹配到的文件或目录。

8. **`-depth`：** 从根目录开始，递归地进入每个子目录，然后再返回处理。

9. **`-empty`：** 查找空文件或空目录。

10. **`-exec command {} +`：** 对每个匹配的文件执行指定的命令。

11. **`-execdir command {} +`：** 类似于`-exec`，但在匹配的文件所在目录中执行命令。

12. **`-executable`：** 查找可执行的文件。

13. **`-fls file`：** 生成一个包含匹配文件信息的文件列表。

14. **`-follow`：** 跟随符号链接。

15. **`-fstype type`：** 限制搜索到指定类型的文件系统。

16. **`-gid n`：** 查找属于指定组ID的文件。

17. **`-group name`：** 查找属于指定组名的文件。

18. **`-help`：** 显示帮助信息。

19. **`-ignore_readdir_race`：** 忽略`readdir`竞争条件，通常与`-mount`一起使用。

20. **`-ilname pattern`：** 类似于`-lname`，但是不区分大小写。

21. **`-iname pattern`：** 类似于`-name`，但是不区分大小写。

22. **`-inum n`：** 查找inode号为n的文件。

23. **`-ipath pattern`：** 类似于`-path`，但是不区分大小写。

24. **`-iregex pattern`：** 类似于`-regex`，但是不区分大小写。

25. **`-links n`：** 查找具有n个硬链接的文件。

26. **`-ls`：** 显示匹配文件的详细信息，类似于`ls`命令。

27. **`-maxdepth n`：** 限制递归的最大深度。

28. **`-mindepth n`：** 限制递归的最小深度。

29. **`-mmin n`：** 查找在n分钟内修改过的文件。

30. **`-mtime n`：** 查找在n天内修改过的文件。

31. **`-name pattern`：** 根据文件名模式查找文件。

32. **`-newer file`：** 查找比file更新的文件。

33. **`-nogroup`：** 查找属于不存在于`/etc/group`的组的文件。

34. **`-noignore_readdir_race`：** 不忽略`readdir`竞争条件。

35. **`-noleaf`：** 不假设目录是有序的，可以提高性能。

36. **`-nouser`：** 查找属于不存在于`/etc/passwd`的用户的文件。

37. **`-ok command {} +`：** 与`-exec`相似，但会询问用户是否执行每个命令。

38. **`-okdir command {} +`：** 与`-execdir`相似，但会询问用户是否执行每个命令。

39. **`-path pattern`：** 根据完整路径名查找文件。

40. **`-perm mode`：** 根据文件权限查找文件。

41. **`-print`：** 将匹配的文件名打印到标准输出。

42. **`-print0`：** 以空字符而不是换行符作为文件名的分隔符。

43. **`-printf format`：** 根据指定的格式打印匹配的文件。

44. **`-prune`：** 阻止`find`进入指定的目录，通常与`-o`一起使用。

45. **`-quit`：** 在找到第一个匹配文件后立即退出。

46. **`-readable`：** 查找可读的文件。

47. **`-regex pattern`：** 使用正则表达式匹配文件路径。

48. **`-regextype type`：** 指定正则表达式的类型（默认是`emacs`）。

49. **`-samefile file`：** 查找与指定文件相同的文件。

50. **`-size n[cwbkMG]`：** 根据文件大小查找文件。

51. **`-true`：** 总是返回真。

52. **`-type c`：** 根据文件类型查找文件（`f`表示普通文件，`d`表示目录）。

53. **`-uid n`：** 查找属于指定用户ID的文件。

54. **`-used n`：** 查找在n天内被访问或修改的文件。

55. **`-user name`：** 查找属于指定用户名的文件。

56. **`-version`：** 显示`find`命令的版本信息。

57. **`-warn`：** 显示警告信息。

58. **`-wholename pattern`：** 类